define(function(){var a=function(a,b){Object.keys(b).filter(function(a){return-1===reserved.indexOf(a)}).forEach(function(c){var d=b[c];"function"==typeof d&&(a[c]=d)}),Object.keys(b.editable).forEach(function(c){var d=b.editable[c],e=typeof d,f="_"+c;"function"===e?Object.defineProperty(a,c,{set:function(b){a[f]=b,d.call(a,b)},get:function(){return a[f]}}):"object"===e&&Object.defineProperty(a,c,{set:d.set,get:d.get})}),a.emit=function(b,c){var d=document.createEvent("CustomEvent");d.initCustomEvent("app-"+b,!1,!1,c),a.dispatchEvent(d)},a.avast=function(a,b,c){var d=document.createElement("avast");d.setAttribute("to",a),d.setAttribute("my",b),d.setAttribute("be",c),parseAvastElement(d)},a.init=function(){b.init&&b.init.call(a)}};return a.reserved=["init","editable"],a.parseAvastElement=function(a){var b=document.querySelector(a.getAttribute("to")),c=a.getAttribute("my"),d=a.getAttribute("be");b&&element.addEventListener("app-"+c,function(a){b[d]=a.data||a.detail},!1)},a._components={},a.faire=function(b){var c=a._components[b.localName],d=b.querySelectorAll("avast");b._innerHTML=b.innerHTML,b._innerText=b.innerText,c.template&&(b.innerHTML=c.template.innerHTML),c.contructor.call(b),Array.prototype.forEach.call(d,function(a){b.avast(a.getAttribute("to"),a.getAttribute("my"),a.getAttribute("be"))}),b.init()},a.avoir=function(b){var c=b.getAttribute("name"),d=b.querySelector("template"),e=b.querySelector('script[type="text/ceci"]'),f=new Function(e.innerHTML);a._components[c]={template:d,contructor:f};var g=document.querySelectorAll(c);Array.prototype.forEach.call(g,function(b){a.faire(b)})},a.commencer=function(b){function c(){Array.prototype.slice.call(document.querySelectorAll("element")).forEach(a.avoir)}var d=document.querySelectorAll("script[data-ceci-components]");if(d.length){var e=d.length;Array.prototype.forEach.call(d,function(a){var d=new XMLHttpRequest;d.open("GET",a.getAttribute("data-ceci-components"),!0),d.onload=function(){var a=document.createElement("div");a.innerHTML=d.response,document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a),0===--e&&(c(),b&&b())},d.send(null)})}else c()},a});